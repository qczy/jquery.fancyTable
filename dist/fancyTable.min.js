/*!
 * jQuery fancyTable plugin v1.0.27
 * https://github.com/myspace-nu
 *
 * Copyright 2018 Johan Johansson
 * Released under the MIT license
 * q3 v 1.1
 */

!function(a){a.fn.fancyTable=function(e){var t=a.extend({inputStyle:"",inputPlaceholder:"Search...",pagination:!1,paginationElement:"",paginationClass:"btn btn-light",paginationClassActive:"active",pagClosest:3,spacer:"...",spacerClass:"",showArrows:!1,prevArrow:"&#10094",nextArrow:"&#10095",perPage:10,sortable:!0,searchable:!0,matchCase:!1,exactMatch:!1,onInit:function(){},onUpdate:function(){},sortFunction:function(a,e,t){return"numeric"==t.sortAs[t.sortColumn]?t.sortOrder>0?parseFloat(a)-parseFloat(e):parseFloat(e)-parseFloat(a):a<e?-t.sortOrder:a>e?t.sortOrder:0},testing:!1},e),n=this;return this.settings=t,this.tableUpdate=function(e){if(e.fancyTable.matches=0,a(e).find("tbody tr").each(function(){var r=0,s=!0,l=!1;a(this).find("td").each(function(){t.globalSearch||!e.fancyTable.searchArr[r]||n.isSearchMatch(a(this).html(),e.fancyTable.searchArr[r])?!t.globalSearch||e.fancyTable.search&&!n.isSearchMatch(a(this).html(),e.fancyTable.search)||Array.isArray(t.globalSearchExcludeColumns)&&t.globalSearchExcludeColumns.includes(r+1)||(l=!0):s=!1,r++}),t.globalSearch&&l||!t.globalSearch&&s?(e.fancyTable.matches++,!t.pagination||e.fancyTable.matches>e.fancyTable.perPage*(e.fancyTable.page-1)&&e.fancyTable.matches<=e.fancyTable.perPage*e.fancyTable.page?a(this).show():a(this).hide()):a(this).hide()}),e.fancyTable.pages=Math.ceil(e.fancyTable.matches/e.fancyTable.perPage),t.pagination){var r=t.paginationElement?a(e).next(".pag"):a(e).find(".pag");if(r.empty(),t.showArrows){var s=a("<a>",{html:t.prevArrow,class:t.paginationClass+" "+(1==e.fancyTable.page?"w3-disabled":"")});1!=e.fancyTable.page&&s.bind("click",function(){e.fancyTable.page--,n.tableUpdate(e)}),r.append(s)}for(var l=1;l<=e.fancyTable.pages;l++)if(1==l||l>e.fancyTable.page-(t.pagClosest+1)&&l<e.fancyTable.page+(t.pagClosest+1)||l==e.fancyTable.pages){s=a("<a>",{href:"#"+l,html:l,"data-n":l,class:t.paginationClass+" "+(l==e.fancyTable.page?t.paginationClassActive:"")}).bind("click",function(t){t.preventDefault(),e.fancyTable.page=a(this).data("n"),n.tableUpdate(e)});l==e.fancyTable.pages&&e.fancyTable.page<e.fancyTable.pages-t.pagClosest-1&&r.append(a("<span>",{html:t.spacer,class:t.spacerClass})),r.append(s),1==l&&e.fancyTable.page>t.pagClosest+2&&r.append(a("<span>",{html:t.spacer,class:t.spacerClass}))}if(t.showArrows){s=a("<a>",{html:t.nextArrow,class:t.paginationClass+" "+(e.fancyTable.pages==e.fancyTable.page?"w3-disabled":"")});e.fancyTable.pages!=e.fancyTable.page&&s.bind("click",function(){e.fancyTable.page++,n.tableUpdate(e)}),r.append(s)}}t.onUpdate.call(this,e)},this.isSearchMatch=function(a,e){if(t.matchCase||(a=a.toUpperCase(),e=e.toUpperCase()),"auto"==t.exactMatch&&e.match(/^".*?"$/))return a==(e=e.substring(1,e.length-1));if("auto"==t.exactMatch&&e.replace(/\s+/g,"").match(/^[<>]/)){var n=e.replace(/\s+/g,"").substring(0,1),r=e.replace(/\s+/g,"").substring(1);return">"==n&&1*a>1*r||"<"==n&&1*a<1*r}if("auto"==t.exactMatch&&e.replace(/\s+/g,"").match(/^.+(\.\.|-).+$/)){var s=e.replace(/\s+/g,"").split(/\.\.|-/);return 1*a>1*s[0]&&1*a<1*s[1]}return!0===t.exactMatch?a==e:new RegExp(e).test(a)},this.reinit=function(){a(this).each(function(){a(this).find("th a").contents().unwrap(),a(this).find("tr.fancySearchRow").remove()}),a(this).fancyTable(this.settings)},this.tableSort=function(e){if(void 0!==e.fancyTable.sortColumn&&e.fancyTable.sortColumn<e.fancyTable.nColumns){var r=0;a(e).find("thead th").each(function(){a(this).attr("aria-sort",r==e.fancyTable.sortColumn?1==e.fancyTable.sortOrder?"ascending":-1==e.fancyTable.sortOrder?"descending":"other":null),r++}),a(e).find("thead th div.sortArrow").each(function(){a(this).remove()});var s=a("<div>",{class:"sortArrow"}).css({margin:"0.1em",display:"inline-block",width:0,height:0,"border-left":"0.4em solid transparent","border-right":"0.4em solid transparent"});s.css(e.fancyTable.sortOrder>0?{"border-top":"0.4em solid #ffff"}:{"border-bottom":"0.4em solid #ffff"}),a(e).find("thead th a").eq(e.fancyTable.sortColumn).append(s),e.fancyTable.page=1,n.tableUpdate(e);var l=a(e).find("tbody tr").toArray().sort(function(n,r){var s=a(n).find("td").eq(e.fancyTable.sortColumn),l=a(r).find("td").eq(e.fancyTable.sortColumn),i=a(s).data("sortvalue")?a(s).data("sortvalue"):s.html(),c=a(l).data("sortvalue")?a(l).data("sortvalue"):l.html();return"case-insensitive"==e.fancyTable.sortAs[e.fancyTable.sortColumn]&&(i=i.toLowerCase(),c=c.toLowerCase()),t.sortFunction.call(this,i,c,e.fancyTable)});a(e).find("tbody").empty().append(l)}},this.each(function(){if("TABLE"!==a(this).prop("tagName"))return console.warn("fancyTable: Element is not a table."),!0;var e=this;if(e.fancyTable={nColumns:a(e).find("td").first().parent().find("td").length,nRows:a(this).find("tbody tr").length,perPage:t.perPage,page:1,pages:0,matches:0,searchArr:[],search:"",sortColumn:t.sortColumn,sortOrder:void 0===t.sortOrder?1:new RegExp("desc","i").test(t.sortOrder)||-1==t.sortOrder?-1:1,sortAs:[]},0==a(e).find("tbody").length){var r=a(e).html();a(e).empty(),a(e).append("<tbody>").append(a(r))}if(0==a(e).find("thead").length&&a(e).prepend(a("<thead>")),t.sortable){var s=0;a(e).find("thead th").each(function(){e.fancyTable.sortAs.push("numeric"==a(this).data("sortas")?"numeric":"case-insensitive"==a(this).data("sortas")?"case-insensitive":null);var t=a(this).html(),r=a("<a>",{href:"#","aria-label":"Sort by "+a(this).text(),html:t,"data-n":s,class:""}).css({cursor:"pointer",color:"inherit","text-decoration":"none"}).bind("click",function(){return e.fancyTable.sortColumn==a(this).data("n")?e.fancyTable.sortOrder=-e.fancyTable.sortOrder:e.fancyTable.sortOrder=1,e.fancyTable.sortColumn=a(this).data("n"),n.tableSort(e),n.tableUpdate(e),!1});a(this).empty(),a(this).append(r),s++})}if(t.searchable){var l=a("<tr>").addClass("fancySearchRow");if(t.globalSearch){var i=a("<input>",{"aria-label":"Search table",placeholder:t.inputPlaceholder,style:"width:100%;box-sizing:border-box;"+t.inputStyle}).bind("change paste keyup",function(){e.fancyTable.search=a(this).val(),e.fancyTable.page=1,n.tableUpdate(e)}),c=a("<th>",{style:"padding:2px;"}).attr("colspan",e.fancyTable.nColumns);a(i).appendTo(a(c)),a(c).appendTo(a(l))}else{var o=0;a(e).find("td").first().parent().find("td").each(function(){e.fancyTable.searchArr.push("");var r=a("<input>",{"aria-label":"Search column","data-n":o,placeholder:t.inputPlaceholder,style:"width:100%;box-sizing:border-box;"+t.inputStyle}).bind("change paste keyup",function(){e.fancyTable.searchArr[a(this).data("n")]=a(this).val(),e.fancyTable.page=1,n.tableUpdate(e)}),s=a("<th>",{style:"padding:2px;"});a(r).appendTo(a(s)),a(s).appendTo(a(l)),o++})}l.appendTo(a(e).find("thead"))}n.tableSort(e),t.pagination&&(t.paginationElement?a(e).after(a(t.paginationElement).addClass("pag")):(a(e).find("tfoot").remove(),a(e).append(a("<tfoot><tr></tr></tfoot>")),a(e).find("tfoot tr").append(a("<td class='pag'></td>",{}).attr("colspan",e.fancyTable.nColumns)))),n.tableUpdate(e),t.onInit.call(this,e)}),this}}(jQuery);
